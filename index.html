<!DOCTYPE html>
<meta charset="utf-8">
<style>

.arc text {
  font: 10px sans-serif;
  text-anchor: middle;
}

.arc path {
  stroke: #fff;
}

</style>
<svg width="480" height="250"></svg>

<div class="weighting">
 <label>Magnitude/Probability of impact <input type="text" id="magnitude" value="1"/></label>
 <label>Level of influence <input type="text" id="influence" value="1"/></label>
 <label>Level of interest <input type="text" id="interest"/ value="1"></label>
 <label>Urgency/ Temporal immediacy <input type="text" id="urgency" value="1"/></label>
 <label>Proximity <input type="text" id="proximity" value="1"/></label>
 <label>Economic interest <input type="text" id="economic-interest" value="1"/></label>
 <label>Rights <input type="text" id="rights" value="1"/></label>
 <label>Fairness <input type="text" id="fairness" value="1"/></label>
 <label>Underrepresented/Underserved representation <input type="text" id="representation" value="1"/></label>
</div>

<script src="d3.min.js"></script>
<script>

var svg = d3.select("svg"),
  width = +svg.attr("width"),
  height = +svg.attr("height"),
  radius = Math.min(width, height) / 2,
  g = svg.append("g").attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

var color = d3.scaleOrdinal(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

var pie = d3.pie()
  .sort(null)
  .value(function(d) { return d.value; });

var path = d3.arc()
  .outerRadius(radius - 10)
  .innerRadius(0);

var label = d3.arc()
  .outerRadius(radius - 40)
  .innerRadius(radius - 40);

if (true == false) {
  d3.csv("data.csv", function(d) {
    d.population = +d.population;
    return d;
  }, function(error, data) {
     if (error) throw error;

     var arc = g.selectAll(".arc")
       .data(pie(data))
       .enter().append("g")
         .attr("class", "arc");

     arc.append("path")
       .attr("d", path)
       .attr("fill", function(d) { return color(d.data.age); });

     arc.append("text")
       .attr("transform", function(d) { return "translate(" + label.centroid(d) + ")"; })
       .attr("dy", "0.35em")
       .text(function(d) { return d.data.age; });
  });
}

var initialData = [{'label': 'magnitude', 'value': '1'},
                   {'label': 'influence', 'value': '1'},
                   {'label': 'interest', 'value': '1'},
                   {'label': 'urgency', 'value': '1'},
                   {'label': 'proximity', 'value': '1'},
                   {'label': 'economic-interest', 'value': '1'},
                   {'label': 'rights', 'value': '1'},
                   {'label': 'fairness', 'value': '1'},
                   {'label': 'representation', 'value': '1'}];

     var arc = g.selectAll(".arc")
       .data(pie(initialData))
       .enter().append("g")
         .attr("class", "arc");

     arc.append("path")
       .attr("d", path)
       .attr("fill", function(d) { console.log(d);return color(d); });

     arc.append("text")
       .attr("transform", function(d) { return "translate(" + label.centroid(d) + ")"; })
       .attr("dy", "0.35em")
       .text(function(d) { return d.initialData; });

// when the input range changes update the circle 
d3.select(".weighting input").on("input", function() {
  console.log(this);
  console.log(typeof(this));
  update(+this.value);
});

// Initial starting radius of the circle 
update(120);

// update the elements
function update(weight) {

  // adjust the text on the range slider
  d3.select("#nRadius-value").text(nRadius);
  d3.select("#nRadius").property("value", nRadius);

  // update the circle radius
  d3.selectAll("circle") 
    .attr("r", nRadius);
}

</script>
